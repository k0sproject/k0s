
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation for k0s, the Zero friction Kubernetes distribution.">
      
      
        <meta name="author" content="Mirantis, Inc.">
      
      
        <link rel="canonical" href="https://docs.k0sproject.io/head/configuration/">
      
      
        <link rel="prev" href="../reset/">
      
      
        <link rel="next" href="../dynamic-configuration/">
      
      
      <link rel="icon" href="../img/k0s-favicon-192.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.21">
    
    
      
        <title>Configuration Options - Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.2a3383ac.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-JMV1409T2T"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-JMV1409T2T');
  </script>

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#configuration-options" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
          <aside class="md-banner md-banner--warning">
            <div class="md-banner__inner md-grid md-typeset">
              
  You are not currently viewing the documentation for the current stable release of k0s.
  <a href="../..">
    <strong>Click here to go to the documentation of the current stable release.</strong>
  </a>

            </div>
            <script>var el=document.querySelector("[data-md-component=outdated]"),base=new URL(".."),outdated=__md_get("__outdated",sessionStorage,base);!0===outdated&&el&&(el.hidden=!1)</script>
          </aside>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Documentation" class="md-header__button md-logo" aria-label="Documentation" data-md-component="logo">
      
  <img src="../img/k0s-favicon-192.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Configuration Options
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/k0sproject/k0s" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Documentation" class="md-nav__button md-logo" aria-label="Documentation" data-md-component="logo">
      
  <img src="../img/k0s-favicon-192.png" alt="logo">

    </a>
    Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/k0sproject/k0s" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Installation
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Installation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../install/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Quick Start Guide
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../k0sctl-install/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Using k0sctl
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Alternative Methods
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            Alternative Methods
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../k0s-multi-node/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Manual (advanced)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../k0s-in-docker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Docker
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../experimental-windows/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Windows (experimental)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../raspberry-pi4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Raspberry Pi 4
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../raspberry-pi5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Raspberry Pi 5
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/ansible-playbook/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ansible Playbook
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../airgap-install/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Airgapped Installation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../custom-ca/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Using custom CA certificate (advanced)
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../system-requirements/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    System Requirements
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../external-runtime-deps/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    External runtime dependencies
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../verifying-signs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Verifying Signed Binaries
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Maintenance
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Maintenance
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../upgrade/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Upgrade
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../backup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Backup/Restore
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../remove_controller/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Remove/Replace a controller
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reset/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Reset (Uninstall)
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Usage
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Usage
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Configuration Options
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Configuration Options
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#using-a-configuration-file" class="md-nav__link">
    <span class="md-ellipsis">
      Using a configuration file
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-k0s-via-k0sctl" class="md-nav__link">
    <span class="md-ellipsis">
      Configuring k0s via k0sctl
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration-file-reference" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration file reference
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spec-key-detail" class="md-nav__link">
    <span class="md-ellipsis">
      spec Key Detail
    </span>
  </a>
  
    <nav class="md-nav" aria-label="spec Key Detail">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#specapi" class="md-nav__link">
    <span class="md-ellipsis">
      spec.api
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#specstorage" class="md-nav__link">
    <span class="md-ellipsis">
      spec.storage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#specnetwork" class="md-nav__link">
    <span class="md-ellipsis">
      spec.network
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#speccontrollermanager" class="md-nav__link">
    <span class="md-ellipsis">
      spec.controllerManager
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#specscheduler" class="md-nav__link">
    <span class="md-ellipsis">
      spec.scheduler
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#specworkerprofiles" class="md-nav__link">
    <span class="md-ellipsis">
      spec.workerProfiles
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#specfeaturegates" class="md-nav__link">
    <span class="md-ellipsis">
      spec.featureGates
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#specimages" class="md-nav__link">
    <span class="md-ellipsis">
      spec.images
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#specextensionshelm" class="md-nav__link">
    <span class="md-ellipsis">
      spec.extensions.helm
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#speckonnectivity" class="md-nav__link">
    <span class="md-ellipsis">
      spec.konnectivity
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spectelemetry" class="md-nav__link">
    <span class="md-ellipsis">
      spec.telemetry
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#disabling-controller-components" class="md-nav__link">
    <span class="md-ellipsis">
      Disabling controller components
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kubelet-root-directory" class="md-nav__link">
    <span class="md-ellipsis">
      Kubelet root directory
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dynamic-configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Dynamic Configuration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../configuration-validation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Configuration Validation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../worker-node-config/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Worker Node Configuration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../networking/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Networking (CNI)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../runtime/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Runtime (CRI)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../storage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Storage (CSI)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../system-monitoring/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    System Components Monitoring
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../manifests/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Manifest Deployer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../helm-charts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Helm Charts
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../feature-gates/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Feature Gates
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cloud-providers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Cloud Providers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dual-stack/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    IPv4/IPv6 dual-stack networking
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../single-stack-ipv6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    IPv6 single-stack networking
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../high-availability/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Control Plane High Availability
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../nllb/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Node-local load balancing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cplb/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Control plane load balancing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../shell-completion/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Shell Completion
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../user-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    User Management
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../environment-variables/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Configuration of Environment Variables
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/oidc/oidc-cluster-configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OpenID Connect
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../selinux/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SELinux
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../podsecurity/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pod Security Standards
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reinstall-k0sctl/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Re-install
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Auto Updates
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Auto Updates
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../autopilot/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../autopilot-multicommand/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Multi-Command Plans
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Extensions
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Extensions
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/metallb-loadbalancer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MetalLB Load Balancer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/nginx-ingress/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    NGINX Ingress Controller
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/traefik-ingress/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Traefik Ingress Controller
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/rook-ceph/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ceph Storage with Rook
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/gitops-flux/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    GitOps with Flux
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/openebs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OpenEBS storage
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Troubleshooting
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Troubleshooting
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../troubleshooting/FAQ/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    FAQ
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../troubleshooting/logs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Logs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../troubleshooting/troubleshooting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Common Pitfalls
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../troubleshooting/support-dump/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Support Insights
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../troubleshooting/certificate-authorities/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Certificate Authorities (CAs)
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Reference
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Architecture
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cli/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Command Line
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cis_benchmark/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Kube-bench Security Benchmark
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Governance
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            Governance
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../security/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Security policy
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../releases/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Releases & support model
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_3" >
        
          
          <label class="md-nav__link" for="__nav_9_3" id="__nav_9_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    CNCF
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_3">
            <span class="md-nav__icon md-icon"></span>
            CNCF
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../governance/cncf/gtr/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    General Technical Review
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../governance/cncf/security-self-assessment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TAG-Security self-assessment
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../commercial-support/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Commercial support
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../adopters/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Adopters
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12" >
        
          
          <label class="md-nav__link" for="__nav_12" id="__nav_12_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Contributing
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_12">
            <span class="md-nav__icon md-icon"></span>
            Contributing
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../contributors/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../contributors/github_workflow/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    GitHub Workflow
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../contributors/testing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Testing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../contributors/docs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Documentation
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#using-a-configuration-file" class="md-nav__link">
    <span class="md-ellipsis">
      Using a configuration file
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-k0s-via-k0sctl" class="md-nav__link">
    <span class="md-ellipsis">
      Configuring k0s via k0sctl
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration-file-reference" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration file reference
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spec-key-detail" class="md-nav__link">
    <span class="md-ellipsis">
      spec Key Detail
    </span>
  </a>
  
    <nav class="md-nav" aria-label="spec Key Detail">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#specapi" class="md-nav__link">
    <span class="md-ellipsis">
      spec.api
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#specstorage" class="md-nav__link">
    <span class="md-ellipsis">
      spec.storage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#specnetwork" class="md-nav__link">
    <span class="md-ellipsis">
      spec.network
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#speccontrollermanager" class="md-nav__link">
    <span class="md-ellipsis">
      spec.controllerManager
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#specscheduler" class="md-nav__link">
    <span class="md-ellipsis">
      spec.scheduler
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#specworkerprofiles" class="md-nav__link">
    <span class="md-ellipsis">
      spec.workerProfiles
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#specfeaturegates" class="md-nav__link">
    <span class="md-ellipsis">
      spec.featureGates
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#specimages" class="md-nav__link">
    <span class="md-ellipsis">
      spec.images
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#specextensionshelm" class="md-nav__link">
    <span class="md-ellipsis">
      spec.extensions.helm
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#speckonnectivity" class="md-nav__link">
    <span class="md-ellipsis">
      spec.konnectivity
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spectelemetry" class="md-nav__link">
    <span class="md-ellipsis">
      spec.telemetry
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#disabling-controller-components" class="md-nav__link">
    <span class="md-ellipsis">
      Disabling controller components
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kubelet-root-directory" class="md-nav__link">
    <span class="md-ellipsis">
      Kubelet root directory
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<!--
SPDX-FileCopyrightText: 2020 k0s authors
SPDX-License-Identifier: CC-BY-SA-4.0
-->

<h1 id="configuration-options">Configuration options<a class="headerlink" href="#configuration-options" title="Permanent link">#</a></h1>
<h2 id="using-a-configuration-file">Using a configuration file<a class="headerlink" href="#using-a-configuration-file" title="Permanent link">#</a></h2>
<p>k0s can be installed without a config file. In that case the default configuration will be used. You can, though, create and run your own non-default configuration (used by the k0s controller nodes).</p>
<p>k0s supports providing only partial configurations. In case of partial configuration is provided, k0s will use the defaults for any missing values.</p>
<ol>
<li>
<p>Generate a YAML config file that uses the default settings.</p>
<div class="highlight"><pre><span></span><code>mkdir<span class="w"> </span>-p<span class="w"> </span>/etc/k0s
k0s<span class="w"> </span>config<span class="w"> </span>create<span class="w"> </span>&gt;<span class="w"> </span>/etc/k0s/k0s.yaml
</code></pre></div>
</li>
<li>
<p>Modify the new YAML config file according to your needs, refer to <a href="#configuration-file-reference">Configuration file reference</a> below. You can remove the default values if wanted as k0s supports partial configs too.</p>
</li>
<li>
<p>Install k0s with your new config file.</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>k0s<span class="w"> </span>install<span class="w"> </span>controller<span class="w"> </span>-c<span class="w"> </span>/etc/k0s/k0s.yaml
</code></pre></div>
</li>
<li>
<p>If you need to modify your existing configuration later on, you can change your config file also when k0s is running, but remember to restart k0s to apply your configuration changes.</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>k0s<span class="w"> </span>stop
sudo<span class="w"> </span>k0s<span class="w"> </span>start
</code></pre></div>
</li>
</ol>
<h2 id="configuring-k0s-via-k0sctl">Configuring k0s via k0sctl<a class="headerlink" href="#configuring-k0s-via-k0sctl" title="Permanent link">#</a></h2>
<p>k0sctl can deploy your configuration options at cluster creation time. Your
options should be placed in the <code>spec.k0s.config</code> section of the k0sctl
configuration file. See the section on how to install <a href="../k0sctl-install/">k0s via
k0sctl</a> and the <a href="https://github.com/k0sproject/k0sctl/blob/main/README.md">k0sctl README</a> for more information.</p>
<h2 id="configuration-file-reference">Configuration file reference<a class="headerlink" href="#configuration-file-reference" title="Permanent link">#</a></h2>
<p><strong>CAUTION</strong>: As many of the available options affect items deep in the stack, you should fully understand the correlation between the configuration file components and your specific environment before making any changes.</p>
<p>A YAML config file follows, with defaults as generated by the <code>k0s config create</code> command:</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">k0s.k0sproject.io/v1beta1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ClusterConfig</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">k0s</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">api</span><span class="p">:</span>
<span class="w">    </span><span class="nt">address</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">192.168.68.104</span>
<span class="w">    </span><span class="nt">k0sApiPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">9443</span>
<span class="w">    </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">6443</span>
<span class="w">    </span><span class="nt">sans</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">192.168.68.104</span>
<span class="w">    </span><span class="nt">ca</span><span class="p">:</span>
<span class="w">      </span><span class="nt">expiresAfter</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">87600h</span>
<span class="w">      </span><span class="nt">certificatesExpireAfter</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8760h</span>
<span class="w">  </span><span class="nt">controllerManager</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">  </span><span class="nt">extensions</span><span class="p">:</span>
<span class="w">    </span><span class="nt">helm</span><span class="p">:</span>
<span class="w">      </span><span class="nt">concurrencyLevel</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span>
<span class="w">  </span><span class="nt">installConfig</span><span class="p">:</span>
<span class="w">    </span><span class="nt">users</span><span class="p">:</span>
<span class="w">      </span><span class="nt">etcdUser</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">etcd</span>
<span class="w">      </span><span class="nt">kineUser</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kube-apiserver</span>
<span class="w">      </span><span class="nt">konnectivityUser</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">konnectivity-server</span>
<span class="w">      </span><span class="nt">kubeAPIserverUser</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kube-apiserver</span>
<span class="w">      </span><span class="nt">kubeSchedulerUser</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kube-scheduler</span>
<span class="w">  </span><span class="nt">konnectivity</span><span class="p">:</span>
<span class="w">    </span><span class="nt">adminPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8133</span>
<span class="w">    </span><span class="nt">agentPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8132</span>
<span class="w">  </span><span class="nt">network</span><span class="p">:</span>
<span class="w">    </span><span class="nt">clusterDomain</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cluster.local</span>
<span class="w">    </span><span class="nt">dualStack</span><span class="p">:</span>
<span class="w">      </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">    </span><span class="nt">kubeProxy</span><span class="p">:</span>
<span class="w">      </span><span class="nt">iptables</span><span class="p">:</span>
<span class="w">        </span><span class="nt">minSyncPeriod</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0s</span>
<span class="w">        </span><span class="nt">syncPeriod</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0s</span>
<span class="w">      </span><span class="nt">ipvs</span><span class="p">:</span>
<span class="w">        </span><span class="nt">minSyncPeriod</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0s</span>
<span class="w">        </span><span class="nt">syncPeriod</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0s</span>
<span class="w">        </span><span class="nt">tcpFinTimeout</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0s</span>
<span class="w">        </span><span class="nt">tcpTimeout</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0s</span>
<span class="w">        </span><span class="nt">udpTimeout</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0s</span>
<span class="w">      </span><span class="nt">metricsBindAddress</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.0.0.0:10249</span>
<span class="w">      </span><span class="nt">mode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">iptables</span>
<span class="w">    </span><span class="nt">kuberouter</span><span class="p">:</span>
<span class="w">      </span><span class="nt">autoMTU</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">      </span><span class="nt">hairpin</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Enabled</span>
<span class="w">      </span><span class="nt">metricsPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8080</span>
<span class="w">    </span><span class="nt">nodeLocalLoadBalancing</span><span class="p">:</span>
<span class="w">      </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">      </span><span class="nt">envoyProxy</span><span class="p">:</span>
<span class="w">        </span><span class="nt">apiServerBindPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">7443</span>
<span class="w">        </span><span class="nt">konnectivityServerBindPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">7132</span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">EnvoyProxy</span>
<span class="w">    </span><span class="nt">podCIDR</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10.244.0.0/16</span>
<span class="w">    </span><span class="nt">provider</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kuberouter</span>
<span class="w">    </span><span class="nt">serviceCIDR</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10.96.0.0/12</span>
<span class="w">  </span><span class="nt">scheduler</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">  </span><span class="nt">storage</span><span class="p">:</span>
<span class="w">    </span><span class="nt">etcd</span><span class="p">:</span>
<span class="w">      </span><span class="nt">peerAddress</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">192.168.68.104</span>
<span class="w">      </span><span class="nt">ca</span><span class="p">:</span>
<span class="w">        </span><span class="nt">expiresAfter</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">87600h</span>
<span class="w">        </span><span class="nt">certificatesExpireAfter</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8760h</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">etcd</span>
<span class="w">  </span><span class="nt">telemetry</span><span class="p">:</span>
<span class="w">    </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</code></pre></div>
<h2 id="spec-key-detail"><code>spec</code> Key Detail<a class="headerlink" href="#spec-key-detail" title="Permanent link">#</a></h2>
<h3 id="specapi"><code>spec.api</code><a class="headerlink" href="#specapi" title="Permanent link">#</a></h3>
<table>
<thead>
<tr>
<th>Element</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>address</code></td>
<td>IP Address used by cluster components to talk to the API server. Also serves as one of the addresses pushed on the k0s create service certificate on the API. Defaults to first non-local address found on the node.</td>
</tr>
<tr>
<td><code>onlyBindToAddress</code></td>
<td>The API server binds to all interfaces by default. With this option set to <code>true</code>, the API server will only listen on the IP address configured by the <code>address</code> option (first non-local address by default). This can be necessary with multi-homed control plane nodes.</td>
</tr>
<tr>
<td><code>externalAddress</code></td>
<td>The load balancer address (for k0s controllers running behind a load balancer). Configures all cluster components to connect to this address and configures this address for use when joining new nodes to the cluster.</td>
</tr>
<tr>
<td><code>sans</code></td>
<td>List of additional addresses to push to API servers serving the certificate.</td>
</tr>
<tr>
<td><code>ca.expiresAfter</code></td>
<td>The expiration duration of the CA certificate (default: 87600h)</td>
</tr>
<tr>
<td><code>ca.certificatesExpireAfter</code></td>
<td>The expiration duration of the server certificate (default: 8760h)</td>
</tr>
<tr>
<td><code>extraArgs</code></td>
<td>Map of key-values (strings) for any extra arguments to pass down to Kubernetes API server process. <code>extraArgs</code> are recommended over <code>rawArgs</code> if the use case allows it. Any behavior triggered by these parameters is outside k0s support. (default: empty)</td>
</tr>
<tr>
<td><code>rawArgs</code></td>
<td>Slice of strings for any raw arguments to pass down to the kube-apiserver process. These are appended after <code>extraArgs</code>. If possible, it's recommended to use <code>extraArgs</code> over <code>rawArgs</code>. Any behavior triggered by these parameters is outside k0s support. (default: empty)</td>
</tr>
<tr>
<td><code>port</code>¹</td>
<td>Custom port for the Kubernetes API server to listen on (default: 6443)</td>
</tr>
<tr>
<td><code>k0sApiPort</code>¹</td>
<td>Custom port for k0s API server to listen on (default: 9443)</td>
</tr>
</tbody>
</table>
<p>¹ If <code>port</code> and <code>k0sApiPort</code> are used with the <code>externalAddress</code> element, the load balancer serving at <code>externalAddress</code> must listen on the same ports.</p>
<h3 id="specstorage"><code>spec.storage</code><a class="headerlink" href="#specstorage" title="Permanent link">#</a></h3>
<table>
<thead>
<tr>
<th>Element</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>type</code></td>
<td>Type of the data store (valid values:<code>etcd</code> or <code>kine</code>). <strong>Note</strong>: Type <code>etcd</code> will cause k0s to create and manage an elastic etcd cluster within the controller nodes.</td>
</tr>
<tr>
<td><code>etcd.peerAddress</code></td>
<td>Node address used for etcd cluster peering.</td>
</tr>
<tr>
<td><code>etcd.extraArgs</code></td>
<td>Map of key-values (strings) for any extra arguments to pass down to etcd process. <code>extraArgs</code> are recommeneded over <code>rawrArgs</code> if the use case allows it.  Any behavior triggered by these parameters is outside k0s support.</td>
</tr>
<tr>
<td><code>etcd.rawArgs</code></td>
<td>Slice of strings for any raw arguments to pass down to the etcd process. These are appeneded after <code>extraArg</code>. If possible, it's recommended to use <code>extraArgs</code> over <code>rawArgs</code>. Any behavior triggered by these parameters is outside k0s support.</td>
</tr>
<tr>
<td><code>etcd.ca.expiresAfter</code></td>
<td>The expiration duration of the CA certificate (default: 87600h)</td>
</tr>
<tr>
<td><code>etcd.ca.certificatesExpireAfter</code></td>
<td>The expiration duration of the server certificate (default: 8760h)</td>
</tr>
<tr>
<td><code>kine.dataSource</code></td>
<td><a href="https://github.com/k3s-io/kine">kine</a> data source URL.</td>
</tr>
<tr>
<td><code>etcd.externalCluster</code></td>
<td>Configuration when etcd is externally managed, i.e. running on dedicated nodes. See <a href="#specstorageetcdexternalcluster"><code>spec.storage.etcd.externalCluster</code></a></td>
</tr>
</tbody>
</table>
<h4 id="specstorageetcdexternalcluster"><code>spec.storage.etcd.externalCluster</code><a class="headerlink" href="#specstorageetcdexternalcluster" title="Permanent link">#</a></h4>
<p>k0s can also work with an externally managed Etcd cluster. If this is configured, k0s will NOT set up etcd, it has to be managed manually.</p>
<table>
<thead>
<tr>
<th>Element</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>endpoints</code></td>
<td>Array of Etcd endpoints to use.</td>
</tr>
<tr>
<td><code>etcdPrefix</code></td>
<td>Prefix to use for this cluster. The same external Etcd cluster can be used for several k0s clusters, each prefixed with a unique prefix to store data with.</td>
</tr>
<tr>
<td><code>caFile</code></td>
<td>CaFile is the host path to a file with the Etcd cluster CA certificate.</td>
</tr>
<tr>
<td><code>clientCertFile</code></td>
<td>ClientCertFile is the host path to a file with the TLS certificate for etcd client.</td>
</tr>
<tr>
<td><code>clientKeyFile</code></td>
<td>ClientKeyFile is the host path to a file with the TLS key for etcd client.</td>
</tr>
</tbody>
</table>
<h3 id="specnetwork"><code>spec.network</code><a class="headerlink" href="#specnetwork" title="Permanent link">#</a></h3>
<table>
<thead>
<tr>
<th>Element</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>provider</code></td>
<td>Network provider (valid values: <code>calico</code>, <code>kuberouter</code>, or <code>custom</code>). For <code>custom</code>, you can push any network provider (default: <code>kuberouter</code>). Be aware that it is your responsibility to configure all the CNI-related setups, including the CNI provider itself and all necessary host levels setups (for example, CNI binaries). <strong>Note:</strong> Once you initialize the cluster with a network provider the only way to change providers is through a full cluster redeployment.</td>
</tr>
<tr>
<td><code>podCIDR</code></td>
<td>Pod network CIDR to use in the cluster. Defaults to <code>10.244.0.0/16</code>.</td>
</tr>
<tr>
<td><code>serviceCIDR</code></td>
<td>Network CIDR to use for cluster VIP services. Defaults to <code>10.96.0.0/12</code>.</td>
</tr>
<tr>
<td><code>primaryAddressFamily</code></td>
<td>Defines the primary family for the cluster. Valid values are empty, <code>IPv4</code>, <code>IPv6</code>. If empty, K0s determines it based on <code>.spec.API.ExternalAddress</code>, if this isn't present it will use <code>.spec.API.Address.</code>. If both addresses are empty or the chosen address is a host name, defaults to <code>IPv4</code>.</td>
</tr>
<tr>
<td><code>clusterDomain</code></td>
<td>Cluster domain to be passed to the <a href="https://kubernetes.io/docs/reference/config-api/kubelet-config.v1beta1/#kubelet-config-k8s-io-v1beta1-KubeletConfiguration">kubelet</a> and the CoreDNS configuration. Defaults to <code>cluster.local</code>.</td>
</tr>
</tbody>
</table>
<h4 id="specnetworkcalico"><code>spec.network.calico</code><a class="headerlink" href="#specnetworkcalico" title="Permanent link">#</a></h4>
<table>
<thead>
<tr>
<th>Element</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>mode</code></td>
<td>Indicates the Calico backend to use. Either <code>bird</code> or <code>vxlan</code> (default). The deprecated legacy value <code>ipip</code> is also accepted.</td>
</tr>
<tr>
<td><code>overlay</code></td>
<td>Overlay mode: <code>Always</code> (default), <code>CrossSubnet</code> or <code>Never</code> (requires <code>mode=vxlan</code> to disable Calico overlay-network).</td>
</tr>
<tr>
<td><code>vxlanPort</code></td>
<td>The UDP port for VXLAN (default: <code>4789</code>).</td>
</tr>
<tr>
<td><code>vxlanVNI</code></td>
<td>The virtual network ID for VXLAN (default: <code>4096</code>).</td>
</tr>
<tr>
<td><code>mtu</code></td>
<td>MTU for overlay network (default: <code>0</code>, which causes Calico to detect optimal MTU during bootstrap).</td>
</tr>
<tr>
<td><code>wireguard</code></td>
<td>Enable WireGuard-based encryption (default: <code>false</code>). Your host system must be WireGuard ready (refer to the <a href="https://docs.projectcalico.org/security/encrypt-cluster-pod-traffic">Calico documentation</a> for details).</td>
</tr>
<tr>
<td><code>flexVolumeDriverPath</code></td>
<td>The host path for Calico's flex-volume-driver(default: <code>/usr/libexec/k0s/kubelet-plugins/volume/exec/nodeagent~uds</code>). Change this path only if the default path cannot be used (refer to <a href="https://github.com/projectcalico/calico/issues/2712">Project Calico Issue #2712</a> for details). Ideally, you will pair this option with a custom <code>volumePluginDir</code> in the profile you use for your worker nodes.</td>
</tr>
<tr>
<td><code>ipAutodetectionMethod</code></td>
<td>Used to force Calico to pick up the interface for pod network inter-node routing (default: <code>""</code>, meaning not set, so that Calico will instead use its defaults). For more information, refer to the <a href="https://docs.projectcalico.org/reference/node/configuration#ip-autodetection-methods">Calico documentation</a>.</td>
</tr>
<tr>
<td><code>envVars</code></td>
<td>Map of key-values (strings) for any calico-node <a href="https://docs.projectcalico.org/reference/node/configuration#ip-autodetection-methods">environment variable</a>.</td>
</tr>
</tbody>
</table>
<h4 id="specnetworkcalicoenvvars"><code>spec.network.calico.envVars</code><a class="headerlink" href="#specnetworkcalicoenvvars" title="Permanent link">#</a></h4>
<p>Environment variable's value must be string, e.g.:</p>
<div class="highlight"><pre><span></span><code><span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">network</span><span class="p">:</span>
<span class="w">    </span><span class="nt">provider</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">calico</span>
<span class="w">    </span><span class="nt">calico</span><span class="p">:</span>
<span class="w">      </span><span class="nt">envVars</span><span class="p">:</span>
<span class="w">        </span><span class="nt">TEST_BOOL_VAR</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;true&quot;</span>
<span class="w">        </span><span class="nt">TEST_INT_VAR</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;42&quot;</span>
<span class="w">        </span><span class="nt">TEST_STRING_VAR</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">test</span>
</code></pre></div>
<p>K0s runs Calico with some predefined vars, which can be overwritten by setting new value in <code>spec.network.calico.envVars</code>:</p>
<div class="highlight"><pre><span></span><code>CALICO_IPV4POOL_CIDR:<span class="w"> </span><span class="s2">&quot;{{ spec.network.podCIDR }}&quot;</span>
CALICO_DISABLE_FILE_LOGGING:<span class="w"> </span><span class="s2">&quot;true&quot;</span>
FELIX_DEFAULTENDPOINTTOHOSTACTION:<span class="w"> </span><span class="s2">&quot;ACCEPT&quot;</span>
FELIX_LOGSEVERITYSCREEN:<span class="w"> </span><span class="s2">&quot;info&quot;</span>
FELIX_HEALTHENABLED:<span class="w"> </span><span class="s2">&quot;true&quot;</span>
FELIX_PROMETHEUSMETRICSENABLED:<span class="w"> </span><span class="s2">&quot;true&quot;</span>
FELIX_FEATUREDETECTOVERRIDE:<span class="w"> </span><span class="s2">&quot;ChecksumOffloadBroken=true&quot;</span>
</code></pre></div>
<p><code>FELIX_FEATUREDETECTOVERRIDE: ChecksumOffloadBroken=true</code> disables VXLAN offloading because of <a href="https://github.com/projectcalico/calico/issues/4727">projectcalico/calico#4727</a>.</p>
<p>In single-stack mode, there are additional vars:</p>
<div class="highlight"><pre><span></span><code>FELIX_IPV6SUPPORT:<span class="w"> </span><span class="s2">&quot;false&quot;</span>
</code></pre></div>
<p>In dual-stack mode, there are additional vars:</p>
<div class="highlight"><pre><span></span><code>CALICO_IPV6POOL_NAT_OUTGOING:<span class="w"> </span><span class="s2">&quot;true&quot;</span>
FELIX_IPV6SUPPORT:<span class="w"> </span><span class="s2">&quot;true&quot;</span>
IP6:<span class="w"> </span><span class="s2">&quot;autodetect&quot;</span>
CALICO_IPV6POOL_CIDR:<span class="w"> </span><span class="s2">&quot;{{ spec.network.dualStack.IPv6podCIDR }}&quot;</span>
</code></pre></div>
<h4 id="specnetworkkuberouter"><code>spec.network.kuberouter</code><a class="headerlink" href="#specnetworkkuberouter" title="Permanent link">#</a></h4>
<table>
<thead>
<tr>
<th>Element</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>autoMTU</code></td>
<td>Auto-detection of used MTU (default: <code>true</code>).</td>
</tr>
<tr>
<td><code>mtu</code></td>
<td>Override MTU setting, if <code>autoMTU</code> must be set to <code>false</code>.</td>
</tr>
<tr>
<td><code>metricsPort</code></td>
<td>Kube-router metrics server port. Set to 0 to disable metrics (default: <code>8080</code>).</td>
</tr>
<tr>
<td><code>peerRouterIPs</code></td>
<td>DEPRECATED: Use extraArgs with peerRouterIPs instead. Comma-separated list of <a href="https://github.com/cloudnativelabs/kube-router/blob/master/docs/bgp.md#global-external-bgp-peers">global peer addresses</a>.</td>
</tr>
<tr>
<td><code>peerRouterASNs</code></td>
<td>DEPRECATED: Use extraArgs with peerRouterASNs instead. Comma-separated list of <a href="https://github.com/cloudnativelabs/kube-router/blob/master/docs/bgp.md#global-external-bgp-peers">global peer ASNs</a>.</td>
</tr>
<tr>
<td><code>hairpin</code></td>
<td>Configure <a href="https://github.com/cloudnativelabs/kube-router/blob/master/docs/user-guide.md#hairpin-mode">hairpin mode</a>. Supported modes are <code>Enabled</code>: enabled cluster wide, <code>Allowed</code>: must be allowed per service using annotations, <code>Disabled</code>: doesn't work at all (default: <code>Enabled</code>)</td>
</tr>
<tr>
<td><code>hairpinMode</code></td>
<td><strong>Deprecated</strong> Use <code>hairpin</code> instead. If both <code>hairpin</code> and <code>hairpinMode</code> are defined, this is ignored. If only hairpinMode is configured explicitly activates hairpinMode.</td>
</tr>
<tr>
<td><code>ipMasq</code></td>
<td>IP masquerade for traffic originating from the pod network, and destined outside of it (default: false)</td>
</tr>
<tr>
<td><code>extraArgs</code></td>
<td>Extra arguments to pass to Kube-router. <code>extraArgs</code> are recommended over <code>rawArgs</code> if the use case allows it. Can be also used to override any k0s managed arguments. For reference, see Kube-router <a href="https://github.com/cloudnativelabs/kube-router/blob/master/docs/user-guide.md#command-line-options">documentation</a>. Any behavior triggered by these parameters is outside k0s support. (default: empty)</td>
</tr>
<tr>
<td><code>rawArgs</code></td>
<td>Slice of strings for any raw arguments to pass down to the kube-router process. These are appended after <code>extraArgs</code>. Any behavior triggered by these parameters is outside k0s support. (default: empty)</td>
</tr>
</tbody>
</table>
<p><strong>Note</strong>: Kube-router allows many networking aspects to be configured per node, service, and pod (for more information, refer to the <a href="https://github.com/cloudnativelabs/kube-router/blob/master/docs/user-guide.md">Kube-router user guide</a>).</p>
<h4 id="specnetworkkubeproxy"><code>spec.network.kubeProxy</code><a class="headerlink" href="#specnetworkkubeproxy" title="Permanent link">#</a></h4>
<p>| Element             | Description                                                                                                                                                                                                                                                               |
---------------------------------------------------------------------------------------------------------|---------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <code>disabled</code>          | Disable kube-proxy altogether (default: <code>false</code>).                                                                                                                                                                                                                         |
| <code>mode</code>              | Kube proxy operating mode, supported modes <code>iptables</code>, <code>ipvs</code>, <code>nftables</code>, <code>userspace</code> (default: <code>iptables</code>)                                                                                                                                                              |
| <code>iptables</code>          | Kube proxy iptables settings                                                                                                                                                                                                                                              |
| <code>ipvs</code>              | Kube proxy IPVS settings                                                                                                                                                                                                                                                  |
| <code>nftables</code>          | Kube proxy nftables settings                                                                                                                                                                                                                                              |
| <code>nodePortAddresses</code> | Kube proxy <a href="https://kubernetes.io/docs/reference/command-line-tools-reference/kube-proxy/">nodePortAddresses</a>                                                                                                                                                             |
| <code>extraArgs</code>         | Map of key-values (strings) for any extra arguments to pass down to kube-proxy process. <code>extraArgs</code> are recommended over <code>rawArgs</code> if the use case allows it. Any behavior triggered by these parameters is outside k0s support. (default: empty)                         |
| <code>rawArgs</code>           | Slice of strings for any raw arguments to pass down to the kube-proxy process. These are appended after <code>extraArgs</code>. If possible, it's recommended to use <code>extraArgs</code> over <code>rawArgs</code>. Any behavior triggered by these parameters is outside k0s support. (default: empty) |</p>
<p>Default kube-proxy iptables settings:</p>
<div class="highlight"><pre><span></span><code><span class="nt">iptables</span><span class="p">:</span>
<span class="w">  </span><span class="nt">masqueradeAll</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">  </span><span class="nt">masqueradeBit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">  </span><span class="nt">minSyncPeriod</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0s</span>
<span class="w">  </span><span class="nt">syncPeriod</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0s</span>
</code></pre></div>
<p>Default kube-proxy IPVS settings:</p>
<div class="highlight"><pre><span></span><code><span class="nt">ipvs</span><span class="p">:</span>
<span class="w">  </span><span class="nt">excludeCIDRs</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">  </span><span class="nt">minSyncPeriod</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0s</span>
<span class="w">  </span><span class="nt">scheduler</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="w">  </span><span class="nt">strictARP</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">  </span><span class="nt">syncPeriod</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0s</span>
<span class="w">  </span><span class="nt">tcpFinTimeout</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0s</span>
<span class="w">  </span><span class="nt">tcpTimeout</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0s</span>
<span class="w">  </span><span class="nt">udpTimeout</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0s</span>
</code></pre></div>
<p>Default kube-proxy nftables settings:</p>
<div class="highlight"><pre><span></span><code><span class="nt">nftables</span><span class="p">:</span>
<span class="w">  </span><span class="nt">masqueradeAll</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">  </span><span class="nt">masqueradeBit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">  </span><span class="nt">minSyncPeriod</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0s</span>
<span class="w">  </span><span class="nt">syncPeriod</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0s</span>
</code></pre></div>
<h4 id="specnetworknodelocalloadbalancing"><code>spec.network.nodeLocalLoadBalancing</code><a class="headerlink" href="#specnetworknodelocalloadbalancing" title="Permanent link">#</a></h4>
<p>Configuration options related to k0s's <a href="../nllb/">node-local load balancing</a> feature.</p>
<table>
<thead>
<tr>
<th>Element</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>enabled</code></td>
<td>Indicates if node-local load balancing should be used to access Kubernetes API servers from worker nodes. Default: <code>false</code>.</td>
</tr>
<tr>
<td><code>type</code></td>
<td>The type of the node-local load balancer to deploy on worker nodes. Default: <code>EnvoyProxy</code>. (This is the only option for now.)</td>
</tr>
<tr>
<td><code>envoyProxy</code></td>
<td>Configuration options related to the "EnvoyProxy" type of load balancing.</td>
</tr>
</tbody>
</table>
<h5 id="specnetworknodelocalloadbalancingenvoyproxy"><code>spec.network.nodeLocalLoadBalancing.envoyProxy</code><a class="headerlink" href="#specnetworknodelocalloadbalancingenvoyproxy" title="Permanent link">#</a></h5>
<p>Configuration options required for using Envoy as the backing implementation for
node-local load balancing.</p>
<p><strong>Note:</strong> This type of load balancing is not supported on ARMv7 workers.</p>
<table>
<thead>
<tr>
<th>Element</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>image</code></td>
<td>The OCI image that's being used for the Envoy Pod.</td>
</tr>
<tr>
<td><code>imagePullPolicy</code></td>
<td>The pull policy being used used for the Envoy Pod. Defaults to <code>spec.images.default_pull_policy</code> if omitted.</td>
</tr>
<tr>
<td><code>apiServerBindPort</code></td>
<td>Port number on which to bind the Envoy load balancer for the Kubernetes API server to on a worker's loopback interface. Default: <code>7443</code>.</td>
</tr>
<tr>
<td><code>konnectivityServerBindPort</code></td>
<td>Port number on which to bind the Envoy load balancer for the konnectivity server to on a worker's loopback interface. Default: <code>7132</code>.</td>
</tr>
</tbody>
</table>
<h5 id="specnetworkcontrolplaneloadbalancing"><code>spec.network.controlPlaneLoadBalancing</code><a class="headerlink" href="#specnetworkcontrolplaneloadbalancing" title="Permanent link">#</a></h5>
<p>Configuration options related to k0s's <a href="../cplb/">control plane load balancing</a> feature</p>
<table>
<thead>
<tr>
<th>Element</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>enabled</code></td>
<td>Indicates if control plane load balancing should be enabled. Default: <code>false</code>.</td>
</tr>
<tr>
<td><code>type</code></td>
<td>The type of the control plane load balancer to deploy on controller nodes. Currently, the only supported type is <code>Keepalived</code>.</td>
</tr>
<tr>
<td><code>keepalived</code></td>
<td>Contains the keepalived configuration.</td>
</tr>
</tbody>
</table>
<h5 id="specnetworkcontrolplaneloadbalancingkeepalived"><code>spec.network.controlPlaneLoadBalancing.Keepalived</code><a class="headerlink" href="#specnetworkcontrolplaneloadbalancingkeepalived" title="Permanent link">#</a></h5>
<p>Configuration options related to keepalived in <a href="../cplb/">control plane load balancing</a></p>
<table>
<thead>
<tr>
<th>Element</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>vrrpInstances</code></td>
<td>Configuration options related to the VRRP. This is an array which allows to configure multiple virtual IPs.</td>
</tr>
<tr>
<td><code>virtualServers</code></td>
<td>Configuration options related to load balancing. This is an array which allows to configure multiple load balancers.</td>
</tr>
<tr>
<td><code>userSpaceProxyBindPort</code></td>
<td>The port the user space proxy will bind to. This port is for internal use only, but listens on every interface. Default: <code>6444</code></td>
</tr>
<tr>
<td><code>disableLoadBalancer</code></td>
<td>Disables the load balancer. Default: <code>false</code></td>
</tr>
</tbody>
</table>
<h5 id="specnetworkcontrolplaneloadbalancingkeepalivedvrrpinstances"><code>spec.network.controlPlaneLoadBalancing.keepalived.vrrpInstances</code><a class="headerlink" href="#specnetworkcontrolplaneloadbalancingkeepalivedvrrpinstances" title="Permanent link">#</a></h5>
<p>Configuration options required for using VRRP to configure VIPs in control plane load balancing.</p>
<table>
<thead>
<tr>
<th>Element</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>virtualIPs</code></td>
<td>List of virtual IP address used by the VRRP instance. Each virtual IP must be a CIDR as defined in RFC 4632 and RFC 4291.A list of the CIDRs handled by the VRRP instance.</td>
</tr>
<tr>
<td><code>interface</code></td>
<td>The NIC used by the virtual router. K0s allows to use either a device name or a MAC address. If not specified, k0s will use the interface that owns the default route.</td>
</tr>
<tr>
<td><code>virtualRouterID</code></td>
<td>The VRRP router ID. If not specified, k0s will automatically number the IDs for each VRRP instance, starting with 51. It must be in the range of 1-255, all the control plane nodes must use the same <code>virtualRouterID</code>. Other clusters in the same network must not use the same <code>virtualRouterID</code>.</td>
</tr>
<tr>
<td><code>advertIntervalSeconds</code></td>
<td>Advertisement interval in seconds. Defaults to 1 second.</td>
</tr>
<tr>
<td><code>authPass</code></td>
<td>The password for accessing VRRPD. This is not a security feature but a way to prevent accidental misconfigurations. It must be in the range of 1-8 characters</td>
</tr>
<tr>
<td><code>unicastPeers</code></td>
<td>A list of IP addresses to connect using unicast. If this field is specified, <code>unicastSourceIP</code> is mandatory, and this list must not contain the IP address specified in <code>unicastSourceIP</code>.</td>
</tr>
<tr>
<td><code>unicastSourceIP</code></td>
<td>The source IP address when using unicast. If <code>unicastPeers</code> isn't defined this field is ignored.</td>
</tr>
<tr>
<td><code>addressLabel</code></td>
<td>The label for the VRRP instance for IPv6 VIPs.  This value is ignored for IPv4 VIPs. This is used to set the routing preference as per RFC 6724. If set to <code>0</code>, uses default value. Default: <code>10000</code></td>
</tr>
</tbody>
</table>
<h5 id="specnetworkcontrolplaneloadbalancingkeepalivedvirtualservers"><code>spec.network.controlPlaneLoadBalancing.keepalived.virtualServers</code><a class="headerlink" href="#specnetworkcontrolplaneloadbalancingkeepalivedvirtualservers" title="Permanent link">#</a></h5>
<p>Configuration options required for using VRRP to configure VIPs in control plane load balancing.</p>
<table>
<thead>
<tr>
<th>Element</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ipAddress</code></td>
<td>The load balancer's listen address.</td>
</tr>
<tr>
<td><code>delayLoop</code></td>
<td>Delay timer for check polling. Accepts microsecond precision. Further precision will be truncated without warnings. Defaults to <code>1m</code>.</td>
</tr>
<tr>
<td><code>lbAlgo</code></td>
<td>Algorithm used by keepalived. Supported algorithms: <code>rr</code>, <code>wrr</code>, <code>lc</code>, <code>wlc</code>, <code>lblc</code>, <code>dh</code>, <code>sh</code>, <code>sed</code>, <code>nq</code>. Default: <code>rr</code>.</td>
</tr>
<tr>
<td><code>lbKind</code></td>
<td>Kind of IPVS load balancer. Supported values: <code>NAT</code>, <code>DR</code>, <code>TUN</code>. Default: <code>DR</code>.</td>
</tr>
<tr>
<td><code>persistenceTimeoutSeconds</code></td>
<td>Timeout for persistent connections in seconds. Must be in the range of 1-2678400 (31 days). If not specified, defaults to 360 (6 minutes).</td>
</tr>
</tbody>
</table>
<h3 id="speccontrollermanager"><code>spec.controllerManager</code><a class="headerlink" href="#speccontrollermanager" title="Permanent link">#</a></h3>
<table>
<thead>
<tr>
<th>Element</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>extraArgs</code></td>
<td>Map of key-values (strings) for any extra arguments you want to pass down to the Kubernetes controller manager process. <code>extraArgs</code> are recommended over <code>rawArgs</code> if the use case allows it. Any behavior triggered by these parameters is outside k0s support. (default: empty)</td>
</tr>
<tr>
<td><code>rawArgs</code></td>
<td>Slice of strings for any raw arguments to pass down to the kube-controller-manager process. These are appended after <code>extraArgs</code>. If possible, it's recommended to use <code>extraArgs</code> over <code>rawArgs</code>. Any behavior triggered by these parameters is outside k0s support. (default: empty)</td>
</tr>
</tbody>
</table>
<h3 id="specscheduler"><code>spec.scheduler</code><a class="headerlink" href="#specscheduler" title="Permanent link">#</a></h3>
<table>
<thead>
<tr>
<th>Element</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>extraArgs</code></td>
<td>Map of key-values (strings) for any extra arguments you want to pass down to Kubernetes scheduler process. <code>extraArgs</code> are recommended over <code>rawArgs</code> if the use case allows it. Any behavior triggered by these parameters is outside k0s support. (default: empty)</td>
</tr>
<tr>
<td><code>rawArgs</code></td>
<td>Slice of strings for any raw arguments to pass down to the kube-scheduler process. These are appended after <code>extraArgs</code>. If possible, it's recommended to use <code>extraArgs</code> over <code>rawArgs</code>. Any behavior triggered by these parameters is outside k0s support. (default: empty)</td>
</tr>
</tbody>
</table>
<h3 id="specworkerprofiles"><code>spec.workerProfiles</code><a class="headerlink" href="#specworkerprofiles" title="Permanent link">#</a></h3>
<p>Worker profiles are used to manage worker-specific configuration in a
centralized manner. A ConfigMap is generated for each worker profile. Based on
the <code>--profile</code> argument given to the <code>k0s worker</code>, the configuration in the
corresponding ConfigMap is picked up during start-up.</p>
<p>The worker profiles are defined as an array. Each element has following
properties:</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>name</code></td>
<td>String; name to use as profile selector for the worker process</td>
</tr>
<tr>
<td><code>values</code></td>
<td>Object; <a href="https://kubernetes.io/docs/reference/config-api/kubelet-config.v1beta1/">Kubelet configuration</a> overrides, see below for details</td>
</tr>
</tbody>
</table>
<h4 id="specworkerprofilesvalues-kubelet-configuration-overrides"><code>spec.workerProfiles[].values</code> (Kubelet configuration overrides)<a class="headerlink" href="#specworkerprofilesvalues-kubelet-configuration-overrides" title="Permanent link">#</a></h4>
<p>The Kubelet configuration overrides of a profile override the defaults defined
by k0s.</p>
<p>Note that there are several fields that cannot be overridden:</p>
<ul>
<li><code>clusterDNS</code></li>
<li><code>clusterDomain</code></li>
<li><code>apiVersion</code></li>
<li><code>kind</code></li>
<li><code>staticPodURL</code></li>
</ul>
<h4 id="configuration-examples">Configuration examples<a class="headerlink" href="#configuration-examples" title="Permanent link">#</a></h4>
<h5 id="custom-volumeplugindir">Custom volumePluginDir<a class="headerlink" href="#custom-volumeplugindir" title="Permanent link">#</a></h5>
<div class="highlight"><pre><span></span><code><span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">workerProfiles</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">custom-pluginDir</span>
<span class="w">      </span><span class="nt">values</span><span class="p">:</span>
<span class="w">         </span><span class="nt">volumePluginDir</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/var/libexec/k0s/kubelet-plugins/volume/exec</span>
</code></pre></div>
<h5 id="eviction-policy">Eviction Policy<a class="headerlink" href="#eviction-policy" title="Permanent link">#</a></h5>
<div class="highlight"><pre><span></span><code><span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">workerProfiles</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">custom-eviction</span>
<span class="w">      </span><span class="nt">values</span><span class="p">:</span>
<span class="w">        </span><span class="nt">evictionHard</span><span class="p">:</span>
<span class="w">          </span><span class="nt">memory.available</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;500Mi&quot;</span>
<span class="w">          </span><span class="nt">nodefs.available</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1Gi&quot;</span>
<span class="w">          </span><span class="nt">imagefs.available</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;100Gi&quot;</span>
<span class="w">        </span><span class="nt">evictionMinimumReclaim</span><span class="p">:</span>
<span class="w">          </span><span class="nt">memory.available</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;0Mi&quot;</span>
<span class="w">          </span><span class="nt">nodefs.available</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;500Mi&quot;</span>
<span class="w">          </span><span class="nt">imagefs.available</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2Gi&quot;</span>
</code></pre></div>
<h5 id="unsafe-sysctls">Unsafe Sysctls<a class="headerlink" href="#unsafe-sysctls" title="Permanent link">#</a></h5>
<div class="highlight"><pre><span></span><code><span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">workerProfiles</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">custom-eviction</span>
<span class="w">      </span><span class="nt">values</span><span class="p">:</span>
<span class="w">        </span><span class="nt">allowedUnsafeSysctls</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fs.inotify.max_user_instances</span>
</code></pre></div>
<h3 id="specfeaturegates"><code>spec.featureGates</code><a class="headerlink" href="#specfeaturegates" title="Permanent link">#</a></h3>
<p>Available components are:</p>
<ul>
<li><code>kube-apiserver</code></li>
<li><code>kube-controller-manager</code></li>
<li><code>kubelet</code></li>
<li><code>kube-scheduler</code></li>
<li><code>kube-proxy</code></li>
</ul>
<p>If <code>components</code> is omitted, propagates to all Kubernetes components.</p>
<p>Modifies <code>extraArgs</code>.</p>
<h4 id="examples">Examples<a class="headerlink" href="#examples" title="Permanent link">#</a></h4>
<h5 id="generic-feature-gates-example">Generic feature gates example<a class="headerlink" href="#generic-feature-gates-example" title="Permanent link">#</a></h5>
<div class="highlight"><pre><span></span><code><span class="nt">spec</span><span class="p">:</span>
<span class="w">    </span><span class="nt">featureGates</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">feature-gate-0</span>
<span class="w">        </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">        </span><span class="nt">components</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;kube-apiserver&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;kube-controller-manager&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;kubelet&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;kube-scheduler&quot;</span><span class="p p-Indicator">]</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">feature-gate-1</span>
<span class="w">        </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">feature-gate-2</span>
<span class="w">        </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
</code></pre></div>
<h5 id="kubelet-feature-gates-example">Kubelet feature gates example<a class="headerlink" href="#kubelet-feature-gates-example" title="Permanent link">#</a></h5>
<p>The below is an example of a k0s config with feature gates enabled:</p>
<div class="highlight"><pre><span></span><code><span class="nt">spec</span><span class="p">:</span>
<span class="w">    </span><span class="nt">featureGates</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DevicePlugins</span>
<span class="w">        </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">        </span><span class="nt">components</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;kubelet&quot;</span><span class="p p-Indicator">]</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Accelerators</span>
<span class="w">        </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">        </span><span class="nt">components</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;kubelet&quot;</span><span class="p p-Indicator">]</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">AllowExtTrafficLocalEndpoints</span>
<span class="w">        </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
</code></pre></div>
<h3 id="specimages"><code>spec.images</code><a class="headerlink" href="#specimages" title="Permanent link">#</a></h3>
<p>Nodes under the <code>images</code> key all have the same basic structure:</p>
<div class="highlight"><pre><span></span><code><span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">images</span><span class="p">:</span>
<span class="w">    </span><span class="nt">coredns</span><span class="p">:</span>
<span class="w">      </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">quay.io/k0sproject/coredns</span>
<span class="w">      </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.13.1</span>
</code></pre></div>
<p>If you want the list of default images and their versions to be included, use <code>k0s config create --include-images</code>.</p>
<h4 id="available-keys">Available keys<a class="headerlink" href="#available-keys" title="Permanent link">#</a></h4>
<ul>
<li><code>spec.images.konnectivity</code></li>
<li><code>spec.images.metricsserver</code></li>
<li><code>spec.images.kubeproxy</code></li>
<li><code>spec.images.coredns</code></li>
<li><code>spec.images.pause</code></li>
<li><code>spec.images.calico.cni</code></li>
<li><code>spec.images.calico.node</code></li>
<li><code>spec.images.calico.kubecontrollers</code></li>
<li><code>spec.images.kuberouter.cni</code></li>
<li><code>spec.images.kuberouter.cniInstaller</code></li>
<li><code>spec.images.repository</code>¹</li>
<li><code>spec.images.default_pull_policy</code>²</li>
</ul>
<p>¹ If <code>spec.images.repository</code> is set and not empty, every image will be pulled from there.</p>
<p>² If <code>spec.images.default_pull_policy</code> is set and not empty, it will be used as a pull policy for each bundled image.</p>
<h4 id="image-example">Image example<a class="headerlink" href="#image-example" title="Permanent link">#</a></h4>
<div class="highlight"><pre><span></span><code><span class="nt">images</span><span class="p">:</span>
<span class="w">  </span><span class="nt">repository</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">airgap-repo.local</span>
<span class="w">  </span><span class="nt">calico</span><span class="p">:</span>
<span class="w">    </span><span class="nt">kubecontrollers</span><span class="p">:</span>
<span class="w">      </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">repo.acme.corp/k0sproject/calico-kube-controllers</span>
<span class="w">      </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v3.29.6-0</span>
<span class="w">  </span><span class="nt">metricsserver</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">repo.acme.corp/k0sproject/metrics-server</span>
<span class="w">    </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v0.7.2-0</span>
</code></pre></div>
<p>In the runtime the image names are calculated as
<code>airgap-repo.local/k0sproject/calico-kube-controllers:v3.29.6-0</code> and
<code>airgap-repo.local/k0sproject/metrics-server:v0.7.2-0</code>. This only
affects the image pull location, and thus omitting an image specification here
will not disable component deployment.</p>
<h3 id="specextensionshelm"><code>spec.extensions.helm</code><a class="headerlink" href="#specextensionshelm" title="Permanent link">#</a></h3>
<p><code>spec.extensions.helm</code> is the config file key in which you configure the list of <a href="https://helm.sh">Helm</a> repositories and charts to deploy during cluster bootstrap (for more information, refer to <a href="../helm-charts/">Helm Charts</a>).</p>
<h3 id="speckonnectivity"><code>spec.konnectivity</code><a class="headerlink" href="#speckonnectivity" title="Permanent link">#</a></h3>
<p>The <code>spec.konnectivity</code> key is the config file key in which you configure Konnectivity-related settings.</p>
<ul>
<li><code>agentPort</code> agent port to listen on (default 8132)</li>
<li><code>adminPort</code> admin port to listen on (default 8133)</li>
</ul>
<h3 id="spectelemetry"><code>spec.telemetry</code><a class="headerlink" href="#spectelemetry" title="Permanent link">#</a></h3>
<p>To improve the end-user experience k0s is configured by default to collect telemetry data from clusters and send it to the k0s development team. To disable the telemetry function, change the <code>enabled</code> setting to <code>false</code>.</p>
<p>The telemetry interval is ten minutes.</p>
<div class="highlight"><pre><span></span><code><span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">telemetry</span><span class="p">:</span>
<span class="w">    </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</code></pre></div>
<h2 id="disabling-controller-components">Disabling controller components<a class="headerlink" href="#disabling-controller-components" title="Permanent link">#</a></h2>
<p>k0s allows to completely disable some of the system components. This allows
users to build a minimal Kubernetes control plane and use what ever components
they need to fulfill their need for the control plane. Disabling the system
components happens through a command line flag for the controller process:</p>
<div class="highlight"><pre><span></span><code>--disable-components strings                     disable components (valid items: applier-manager,autopilot,control-api,coredns,csr-approver,endpoint-reconciler,helm,konnectivity-server,kube-controller-manager,kube-proxy,kube-scheduler,metrics-server,network-provider,node-role,system-rbac,update-prober,windows-node,worker-config)
</code></pre></div>
<p>If you use k0sctl, just add the flag when installing the cluster for the first
controller at <code>spec.hosts.installFlags</code> in the config file like e.g.:</p>
<div class="highlight"><pre><span></span><code><span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">hosts</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">role</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">controller</span>
<span class="w">    </span><span class="nt">installFlags</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--disable-components=metrics-server</span>
</code></pre></div>
<p>As seen from the component list, the only always-on component is the Kubernetes
API server, without that k0s serves no purpose.</p>
<h2 id="kubelet-root-directory">Kubelet root directory<a class="headerlink" href="#kubelet-root-directory" title="Permanent link">#</a></h2>
<p>Unlike vanilla Kubernetes, k0s by default deploys kubelet's root directory
inside <code>--data-dir</code>, which defaults to <code>/var/lib/k0s/</code> and kubelet ultimately
runs in <code>/var/lib/k0s/kubelet</code>. This can result in incompatibilities on external
software that mounts the kubelet working directory, such as CSI plugins.</p>
<p>This can be changed using the flag <code>--kubelet-root-dir</code>, for instance, to use
Kubernetes' default value it can be set up as:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>k0s<span class="w"> </span>install<span class="w"> </span>worker<span class="w"> </span>--token-file<span class="w"> </span>/var/lib/k0s/join-token<span class="w"> </span>--kubelet-root-dir<span class="o">=</span>/var/lib/kubelet
</code></pre></div>
<p>Keep in mind that changing the flag in an existing node will not remove existing directories.
Equally importantly, some pods such as CSI plugins are likely to mount this directory,
having inconsistent values across nodes is very likely to cause problems on Deployments and
DaemonSets.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2021 k0sproject a Series of LF Projects, LLC. For website terms of use, trademark policy and other project policies please see <a href="https://lfprojects.org/policies/" target="_blank">Linux Foundation policies</a>. - All rights reserved.
    </div>
  
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
    <a href="https://github.com/k0sproject/k0s" target="_blank" rel="noopener" title="k0s on GitHub" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
    <a href="https://x.com/k0sproject" target="_blank" rel="noopener" title="k0s on X" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M357.2 48h70.6L273.6 224.2 455 464H313L201.7 318.6 74.5 464H3.8l164.9-188.5L-5.2 48h145.6l100.5 132.9zm-24.8 373.8h39.1L119.1 88h-42z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://blog.k0sproject.io/" target="_blank" rel="noopener" title="The k0sproject community blog" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M224 24c0-13.3 10.7-24 24-24 145.8 0 264 118.2 264 264 0 13.3-10.7 24-24 24s-24-10.7-24-24c0-119.3-96.7-216-216-216-13.3 0-24-10.7-24-24M80 96c26.5 0 48 21.5 48 48v224c0 26.5 21.5 48 48 48s48-21.5 48-48-21.5-48-48-48c-8.8 0-16-7.2-16-16v-64c0-8.8 7.2-16 16-16 79.5 0 144 64.5 144 144s-64.5 144-144 144S32 447.5 32 368V144c0-26.5 21.5-48 48-48m168 0c92.8 0 168 75.2 168 168 0 13.3-10.7 24-24 24s-24-10.7-24-24c0-66.3-53.7-120-120-120-13.3 0-24-10.7-24-24s10.7-24 24-24"/></svg>
    </a>
  
    
    
    
    
    <a href="https://blog.k0sproject.io/index.xml" target="_blank" rel="noopener" title="RSS feed of the k0sproject community blog" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M0 64c0-17.7 14.3-32 32-32 229.8 0 416 186.2 416 416 0 17.7-14.3 32-32 32s-32-14.3-32-32C384 253.6 226.4 96 32 96 14.3 96 0 81.7 0 64m0 352a64 64 0 1 1 128 0 64 64 0 1 1-128 0m32-256c159.1 0 288 128.9 288 288 0 17.7-14.3 32-32 32s-32-14.3-32-32c0-123.7-100.3-224-224-224-17.7 0-32-14.3-32-32s14.3-32 32-32"/></svg>
    </a>
  
    
    
    
    
    <a href="https://kubernetes.slack.com/archives/C07VAPJUECS" target="_blank" rel="noopener" title="k0s on the k8s slack" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M94.1 315.1c0 25.9-21.2 47.1-47.1 47.1S0 341 0 315.1 21.2 268 47.1 268h47.1v47.1zm23.7 0c0-25.9 21.2-47.1 47.1-47.1s47.1 21.2 47.1 47.1v117.8c0 25.9-21.2 47.1-47.1 47.1s-47.1-21.2-47.1-47.1zm47.1-189c-25.9 0-47.1-21.2-47.1-47.1s21.2-47 47.1-47S212 53.2 212 79.1v47.1h-47.1zm0 23.7c25.9 0 47.1 21.2 47.1 47.1S190.8 244 164.9 244H47.1C21.2 244 0 222.8 0 196.9s21.2-47.1 47.1-47.1zm189 47.1c0-25.9 21.2-47.1 47.1-47.1s47 21.2 47 47.1-21.2 47.1-47.1 47.1h-47.1v-47.1zm-23.7 0c0 25.9-21.2 47.1-47.1 47.1S236 222.8 236 196.9V79.1c0-25.9 21.2-47.1 47.1-47.1s47.1 21.2 47.1 47.1zm-47.1 189c25.9 0 47.1 21.2 47.1 47.1s-21.2 47-47.1 47-47.1-21.2-47.1-47.1v-47.1h47.1zm0-23.7c-25.9 0-47.1-21.2-47.1-47.1s21.2-47.1 47.1-47.1h117.8c25.9 0 47.1 21.2 47.1 47.1s-21.2 47.1-47.1 47.1z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://k0sproject.io/" target="_blank" rel="noopener" title="k0s Website" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M419.5 96c-16.6 0-32.7 4.5-46.8 12.7-15.8-16-34.2-29.4-54.5-39.5 28.2-24 64.1-37.2 101.3-37.2C505.9 32 576 102 576 188.5c0 41.5-16.5 81.3-45.8 110.6l-71.1 71.1C429.8 399.5 390 416 348.5 416 262.1 416 192 346 192 259.5c0-1.5 0-3 .1-4.5.5-17.7 15.2-31.6 32.9-31.1s31.6 15.2 31.1 32.9v2.6c0 51.1 41.4 92.5 92.5 92.5 24.5 0 48-9.7 65.4-27.1l71.1-71.1c17.3-17.3 27.1-40.9 27.1-65.4 0-51.1-41.4-92.5-92.5-92.5zm-144.3 77.3c-1.9-.8-3.8-1.9-5.5-3.1-12.6-6.5-27-10.2-42.1-10.2-24.5 0-48 9.7-65.4 27.1l-71.1 71.1C73.8 275.5 64 299.1 64 323.6c0 51.1 41.4 92.5 92.5 92.5 16.5 0 32.6-4.4 46.7-12.6 15.8 16 34.2 29.4 54.6 39.5-28.2 23.9-64 37.2-101.3 37.2C70.1 480.2 0 410.2 0 323.7c0-41.5 16.5-81.3 45.8-110.6l71.1-71.1c29.3-29.3 69.1-45.8 110.6-45.8 86.6 0 156.5 70.6 156.5 156.9v3.9c-.4 17.7-15.1 31.6-32.8 31.2s-31.6-15.1-31.2-32.8v-2.3c0-33.7-18-63.3-44.8-79.6z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["toc.autohide", "search.suggest", "search.highlight"], "search": "../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"default": "stable", "provider": "mike"}}</script>
    
    
      <script src="../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>